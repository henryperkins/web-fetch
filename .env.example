# web-fetch-mcp Configuration
# Copy to .env and customize

# ============================================
# FETCH LIMITS
# ============================================
# Maximum response body size in bytes (default: 10MB)
MAX_BYTES=10485760

# Request timeout in milliseconds (default: 30000)
TIMEOUT_MS=30000

# Maximum number of HTTP redirects to follow (default: 5)
MAX_REDIRECTS=5

# ============================================
# SECURITY
# ============================================
# Block requests to private/localhost IPs (default: true)
BLOCK_PRIVATE_IP=true

# Optional allowlist of domains (comma-separated, empty = allow all public)
ALLOWLIST_DOMAINS=

# Rate limit: max requests per host per minute (default: 60)
RATE_LIMIT_PER_HOST=60

# ============================================
# CONTENT PROCESSING
# ============================================
# Default max tokens for chunking (default: 4000)
DEFAULT_MAX_TOKENS=4000

# Margin ratio for chunking (default: 0.10)
CHUNK_MARGIN_RATIO=0.10

# Whether to respect robots.txt (default: true)
RESPECT_ROBOTS=true

# ============================================
# OPTIONAL FEATURES
# ============================================
# Enable Playwright for JS-rendered pages (default: false)
# Requires: npm install playwright && npx playwright install chromium
PLAYWRIGHT_ENABLED=false

# Enable PDF text extraction (default: true)
PDF_ENABLED=true

# ============================================
# CACHING
# ============================================
# Cache TTL in seconds (default: 300 = 5 minutes)
CACHE_TTL_S=300

# ============================================
# BROWSER RENDERING (when PLAYWRIGHT_ENABLED=true)
# ============================================
# Block third-party requests in render mode (default: true)
RENDER_BLOCK_THIRD_PARTY=true

# Browser timeout in milliseconds (default: 60000)
RENDER_TIMEOUT_MS=60000

# Default user agent
USER_AGENT=web-fetch-mcp/1.0 (+https://github.com/example/web-fetch-mcp)

# ============================================
# CLOUDFLARE AI SEARCH (OPTIONAL)
# ============================================
# Enable AI Search ingestion by default
AI_SEARCH_ENABLED=false

# Cloudflare account and AI Search resource
CF_ACCOUNT_ID=
CF_AI_SEARCH_NAME=
CF_AI_SEARCH_API_TOKEN=

# R2 credentials + bucket
CF_R2_BUCKET=
CF_R2_ACCESS_KEY_ID=
CF_R2_SECRET_ACCESS_KEY=

# Optional R2 endpoint override and prefix
CF_R2_ENDPOINT=https://<account_id>.r2.cloudflarestorage.com
CF_R2_PREFIX=ai-search/

# AI Search upload/query limits
AI_SEARCH_MAX_FILE_BYTES=4194304
AI_SEARCH_QUERY_TIMEOUT_MS=15000
AI_SEARCH_QUERY_WAIT_MS=0
AI_SEARCH_MAX_QUERY_WAIT_MS=15000
